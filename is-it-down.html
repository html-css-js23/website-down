<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Customizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .full-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 50;
        }
        .full-screen-btn {
            z-index: 60;
            position: fixed;
            bottom: 20px;
            right: 20px;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">

    <!-- Main Container -->
    <div id="main-container" class="flex flex-col h-screen overflow-hidden transition-all duration-300">
        
        <!-- Header and Controls -->
        <header class="flex-shrink-0 bg-white dark:bg-gray-800 shadow-md p-4 flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0 md:space-x-4">
            
            <div class="flex-grow flex items-center space-x-2 w-full md:w-auto">
                <div class="relative w-full">
                    <input type="text" id="url-input" placeholder="Enter URL (e.g., https://example.com)" class="w-full pl-10 pr-4 py-2 border rounded-full text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300">
                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                </div>
                <button id="load-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition-colors duration-300 shadow-lg">
                    Load
                </button>
            </div>

            <!-- Customization Controls -->
            <div class="flex-shrink-0 flex flex-wrap items-center justify-center space-x-4 p-2 bg-gray-100 dark:bg-gray-700 rounded-full shadow-inner w-full md:w-auto">
                <div class="flex items-center space-x-2">
                    <label for="bg-color-picker" class="font-medium text-gray-700 dark:text-gray-300">Background</label>
                    <input type="color" id="bg-color-picker" value="#f3f4f6" class="w-8 h-8 rounded-full border border-gray-300 dark:border-gray-600 cursor-pointer">
                </div>
                <div class="flex items-center space-x-2">
                    <label for="text-color-picker" class="font-medium text-gray-700 dark:text-gray-300">Text</label>
                    <input type="color" id="text-color-picker" value="#1f2937" class="w-8 h-8 rounded-full border border-gray-300 dark:border-gray-600 cursor-pointer">
                </div>
                <div class="flex items-center space-x-2">
                    <label for="font-size-range" class="font-medium text-gray-700 dark:text-gray-300">Font Size</label>
                    <input type="range" id="font-size-range" min="12" max="24" value="16" class="w-24">
                    <span id="font-size-value" class="w-8 text-right text-sm">16px</span>
                </div>
                <button id="reset-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-3 rounded-full text-sm transition-colors duration-300">
                    Reset
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="flex-grow relative bg-white dark:bg-gray-900 transition-all duration-300">
            <iframe id="web-viewer" src="about:blank" class="w-full h-full border-0 transition-all duration-300"></iframe>
            <div id="message-box" class="absolute inset-0 bg-gray-200 dark:bg-gray-800 flex items-center justify-center text-gray-500 font-medium text-xl p-4 text-center rounded-lg shadow-inner">
                Use the URL bar to load a website. Please be aware that this tool can only modify the style of the current application, not the loaded website.
            </div>
        </main>

        <!-- Full Screen Button -->
        <button id="fullscreen-btn" class="full-screen-btn bg-black bg-opacity-70 text-white p-4 rounded-full shadow-lg hover:bg-opacity-90 transition-all duration-300">
            <i class="fas fa-expand text-2xl"></i>
        </button>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlInput = document.getElementById('url-input');
            const loadBtn = document.getElementById('load-btn');
            const webViewer = document.getElementById('web-viewer');
            const messageBox = document.getElementById('message-box');
            const fullscreenBtn = document.getElementById('fullscreen-btn');
            const mainContainer = document.getElementById('main-container');

            const bgColorPicker = document.getElementById('bg-color-picker');
            const textColorPicker = document.getElementById('text-color-picker');
            const fontSizeRange = document.getElementById('font-size-range');
            const fontSizeValue = document.getElementById('font-size-value');
            const resetBtn = document.getElementById('reset-btn');

            // --- Local Storage Keys ---
            const LS_KEYS = {
                BG_COLOR: 'custom_bg_color',
                TEXT_COLOR: 'custom_text_color',
                FONT_SIZE: 'custom_font_size'
            };

            // --- Function to save settings to localStorage ---
            const saveSettings = () => {
                localStorage.setItem(LS_KEYS.BG_COLOR, bgColorPicker.value);
                localStorage.setItem(LS_KEYS.TEXT_COLOR, textColorPicker.value);
                localStorage.setItem(LS_KEYS.FONT_SIZE, fontSizeRange.value);
            };

            // --- Function to load settings from localStorage and apply them ---
            const loadAndApplySettings = () => {
                const savedBgColor = localStorage.getItem(LS_KEYS.BG_COLOR);
                const savedTextColor = localStorage.getItem(LS_KEYS.TEXT_COLOR);
                const savedFontSize = localStorage.getItem(LS_KEYS.FONT_SIZE);

                if (savedBgColor) {
                    bgColorPicker.value = savedBgColor;
                    document.body.style.backgroundColor = savedBgColor;
                }
                if (savedTextColor) {
                    textColorPicker.value = savedTextColor;
                    document.body.style.color = savedTextColor;
                }
                if (savedFontSize) {
                    fontSizeRange.value = savedFontSize;
                    document.body.style.fontSize = `${savedFontSize}px`;
                    fontSizeValue.textContent = `${savedFontSize}px`;
                }
            };

            // --- Event Listeners for Customization Controls ---
            bgColorPicker.addEventListener('input', (e) => {
                document.body.style.backgroundColor = e.target.value;
                saveSettings();
            });

            textColorPicker.addEventListener('input', (e) => {
                document.body.style.color = e.target.value;
                saveSettings();
            });

            fontSizeRange.addEventListener('input', (e) => {
                const size = e.target.value;
                document.body.style.fontSize = `${size}px`;
                fontSizeValue.textContent = `${size}px`;
                saveSettings();
            });

            resetBtn.addEventListener('click', () => {
                localStorage.removeItem(LS_KEYS.BG_COLOR);
                localStorage.removeItem(LS_KEYS.TEXT_COLOR);
                localStorage.removeItem(LS_KEYS.FONT_SIZE);
                location.reload(); // Simple way to reset to default styles
            });

            // --- URL Loading Logic ---
            const loadUrl = () => {
                let url = urlInput.value.trim();
                if (url) {
                    // Check for http/https protocol, add if missing
                    if (!url.startsWith('http://') && !url.startsWith('https://')) {
                        url = 'https://' + url;
                    }
                    messageBox.textContent = 'Loading...';
                    webViewer.src = url;
                    messageBox.classList.add('hidden');
                }
            };

            loadBtn.addEventListener('click', loadUrl);
            urlInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    loadUrl();
                }
            });

            // --- Full Screen Logic ---
            let isFullscreen = false;
            fullscreenBtn.addEventListener('click', () => {
                if (mainContainer.requestFullscreen) {
                    mainContainer.requestFullscreen();
                } else if (mainContainer.webkitRequestFullscreen) { /* Safari */
                    mainContainer.webkitRequestFullscreen();
                } else if (mainContainer.msRequestFullscreen) { /* IE11 */
                    mainContainer.msRequestFullscreen();
                }
            });

            document.addEventListener('fullscreenchange', () => {
                if (document.fullscreenElement) {
                    mainContainer.classList.add('full-screen');
                    fullscreenBtn.innerHTML = '<i class="fas fa-compress-alt text-2xl"></i>';
                } else {
                    mainContainer.classList.remove('full-screen');
                    fullscreenBtn.innerHTML = '<i class="fas fa-expand text-2xl"></i>';
                }
            });

            // Initial load of settings from localStorage
            loadAndApplySettings();
        });
    </script>
</body>
</html>
